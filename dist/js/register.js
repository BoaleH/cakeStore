"use strict";require(["./config"],function(){require(["jquery","cookie","headfoot","masklayer","public"],function(t,e){function o(){this.addEvent()}o.prototype={constructor:o,addEvent:function(){t("#verificationCodeImg").on("click",this.getverificationCodeImg),t("#verificationCode").on("blur",this.promptverificationCodeImg),t("#phoneNumber").on("blur",this.promptUserName),t("#qpword").on("blur",this.promptPassword),t("#zcbtn").on("click",this.submiRegister)},getverificationCodeImg:function(e){e=e||window.event,t.ajax({type:"post",url:"http://route.showapi.com/932-2",dataType:"json",data:{showapi_appid:"87503",showapi_sign:"7c4c12affa48472d946abb28911e9751",length:"4",specials:"false"},error:function(e,t,o){alert("操作失败!")},success:function(e){t("#verificationCodeImg").attr("src",e.showapi_res_body.image),t("#verificationCodeImg").attr("sid",e.showapi_res_body.sid)}})},promptverificationCodeImg:function(e){e=e||window.event,t.ajax({type:"post",url:"http://route.showapi.com/932-1",dataType:"json",data:{showapi_appid:"87503",showapi_sign:"7c4c12affa48472d946abb28911e9751",checkcode:t("#verificationCode").val(),sid:t("#verificationCodeImg").attr("sid")},error:function(e,t,o){alert("操作失败!")},success:function(e){e.showapi_res_body.valid?t("#verificationCodePrompt").text("验证码正确"):t("#verificationCodePrompt").text("验证码错误")}})},promptUserName:function(e){e=e||window.event,t.ajax({type:"get",url:"/Nhaolilai/php/check.php",dataType:"json",data:{phoneNumber:t("#phoneNumber").val()},error:function(e,t,o){alert("操作失败!")},success:function(e){0==e.data.length||t("#phoneNumber").val()!=e.data[0].username?/^1[34578]\d{9}$/.test(t("#phoneNumber").val())?(t("#repeatPrompt").text("用户名可用"),t("#lengthPrompt").text("用户名格式正确")):(t("#lengthPrompt").text("用户名格式错误"),t("#repeatPrompt").text("用户名不可用")):(t("#repeatPrompt").text("用户名重复"),this.judge=0)}})},promptPassword:function(e){t("#pword").val()==t("#qpword").val()?t("#mimatishi").text("密码正确"):t("#mimatishi").text("密码错误")},submiRegister:function(e){console.log(t("#cbox").is(":checked")),t("#cbox").is(":checked")?t.ajax({type:"get",url:"/Nhaolilai/php/register.php",dataType:"json",data:{phoneNumber:t("#phoneNumber").val(),pword:t("#pword").val()},success:function(e){1==e&&(window.location.href="/Nhaolilai/html/login.html")}}):alert("信息输入有误")}},new o})});